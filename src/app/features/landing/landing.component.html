<!-- FLOATING BOTTOM MENU (Visible on Scroll) -->
<div class="floating-menu-container" [class.visible]="showFloatingMenu">
  <div class="floating-menu glass-pill">
    <div class="d-flex align-items-center gap-4 px-2">
      <a href="#home" class="menu-brand d-flex align-items-center gap-2 text-decoration-none">
        <div class="logo-box" style="width: 32px; height: 32px; font-size: 16px;">L</div>
        <span class="d-none d-sm-inline fw-bold text-white">Loanly</span>
      </a>
      <div class="vr bg-secondary opacity-25 mx-2" style="height: 24px;"></div>
      <div class="d-flex gap-3">
        <a href="#program" class="menu-link">Program</a>
        <a href="#keunggulan" class="menu-link">Keunggulan</a>
        <a href="#produk" class="menu-link">Produk</a>
        <a href="#tahapan" class="menu-link">Tahapan</a>
      </div>
      <div class="ms-auto ps-3">
        <a routerLink="/login" class="btn btn-light rounded-pill px-4 py-2 fw-bold text-dark" style="font-size: 14px;">
          Get Started <i class="bi bi-arrow-right ms-1"></i>
        </a>
      </div>
    </div>
  </div>
</div>

<!-- 1. HERO SECTION (Image 1 Style) -->
<section id="home" class="hero-section">
  <!-- Dot Grid Background -->
  <div class="bg-grid"></div>

  <!-- Graphic Ribbon Line (SVG) - Hyperflow Exact Style -->
  <div class="graphic-ribbon-container">
    <svg viewBox="0 0 1440 5000" preserveAspectRatio="xMidYMin slice" fill="none" xmlns="http://www.w3.org/2000/svg"
      class="graphic-ribbon">
      <defs>
        <!-- Radial Gradient: Grey -> Blue -> Teal (even distribution) -->
        <radialGradient id="ribbonGradient" cx="50%" cy="30%" r="70%" fx="50%" fy="30%"
          gradientUnits="objectBoundingBox">
          <stop offset="0%" stop-color="#D1D5DB" /> <!-- Grey at center -->
          <stop offset="20%" stop-color="#14B8A6" /> <!-- Medium Grey -->
          <stop offset="50%" stop-color="#60A5FA" /> <!-- Sky Blue -->
          <stop offset="75%" stop-color="#9CA3AF" /> <!-- Teal -->
          <stop offset="100%" stop-color="#0D9488" /> <!-- Deep Teal at edge -->
        </radialGradient>

        <!-- Grain/Noise Texture Filter -->
        <filter id="noiseFilter" x="0" y="0" width="100%" height="100%">
          <feTurbulence type="fractalNoise" baseFrequency="0.7" numOctaves="4" stitchTiles="stitch" result="noise" />
          <feColorMatrix in="noise" type="saturate" values="0" result="monoNoise" />
          <feBlend in="SourceGraphic" in2="monoNoise" mode="multiply" />
        </filter>
      </defs>

      <!-- 
        Ribbon Path Structure:
        1. Start from top-right, off-screen
        2. Curve down and create a LOOP (knot/infinity shape)
        3. Continue flowing left-right, winding down the page
        4. End past the footer
      -->
      <path d="
        M 1300 -100
        C 1350 200, 1200 400, 1000 500
        C 700 650, 500 500, 600 300
        C 700 100, 1000 150, 1100 350
        C 1200 550, 900 800, 600 900
        C 200 1050, 100 1400, 400 1700
        C 700 2000, 1200 1900, 1100 2300
        C 1000 2700, 300 2600, 200 3000
        C 100 3400, 600 3700, 900 3900
        C 1200 4100, 1300 4500, 1000 4800
        C 700 5100, 200 5000, 100 5300
      " stroke="url(#ribbonGradient)" stroke-width="120" stroke-linecap="round" stroke-linejoin="round" fill="none"
        opacity="0.9" />
    </svg>
  </div>

  <!-- Top Initial Navbar (Hidden on scroll) -->
  <nav
    class="navbar-top pt-4 px-5 d-flex justify-content-between align-items-center w-100 position-absolute top-0 start-0 z-3 transition-opacity"
    [class.opacity-0]="showFloatingMenu">
    <div class="d-flex align-items-center gap-3">
      <div class="logo-box" style="width: 32px; height: 32px; font-size: 16px;">L</div>
      <span class="fs-4 fw-bold text-white">Loanly</span>
    </div>
    <div class="d-flex gap-3">
      <a routerLink="/login" class="btn btn-outline-glass rounded-pill px-4 py-2">Book a Call</a>
      <a routerLink="/login" class="btn btn-light rounded-pill px-4 py-2 fw-bold text-dark">Get Started <i
          class="bi bi-arrow-right ms-2"></i></a>
    </div>
  </nav>

  <div class="container hero-content position-relative z-2">
    <div class="row align-items-center min-vh-100">
      <div class="col-lg-6">
        <h1 class="hero-title display-1 fw-bolder text-white mb-4" style="line-height: 1;">
          <span class="rotating-word-container">
            <span class="rotating-word" [class.slide-out]="isAnimating()" [class.slide-in]="!isAnimating()">{{
              currentWord() }}</span>
          </span><br>
          <span class="text-white">Loans for Your</span><br>
          <span class="fst-italic text-gradient-purple">Financial Future.</span>
        </h1>

        <p class="hero-subtitle lead text-secondary mb-5" style="max-width: 450px;">
          Smart financial solutions with enterprise-grade security and seamless experience. Fast approval, instant
          disbursement.
        </p>

        <a routerLink="/login" class="btn btn-light btn-lg rounded-pill px-5 py-3 fw-bold text-dark">
          Book a Loan <i class="bi bi-arrow-right ms-2"></i>
        </a>

        <!-- Trust Badges -->
        <div class="d-flex gap-4 mt-5 align-items-center">
          <div class="d-flex align-items-center gap-2">
            <i class="bi bi-shield-check text-success fs-4"></i>
            <span class="text-secondary small">OJK Licensed</span>
          </div>
          <div class="d-flex align-items-center gap-2">
            <i class="bi bi-lock-fill text-primary fs-4"></i>
            <span class="text-secondary small">Bank-Grade Security</span>
          </div>
        </div>

        <!-- Hero Stats -->
        <div class="row g-4 mt-4 pt-4 border-top border-secondary border-opacity-25">
          <div class="col-4">
            <div class="stat-number fs-3 fw-bold text-white">10K+</div>
            <div class="stat-label text-secondary small">Nasabah Aktif</div>
          </div>
          <div class="col-4">
            <div class="stat-number fs-3 fw-bold text-white">Rp 50M+</div>
            <div class="stat-label text-secondary small">Dana Tersalur</div>
          </div>
          <div class="col-4">
            <div class="stat-number fs-3 fw-bold text-white">24/7</div>
            <div class="stat-label text-secondary small">Support</div>
          </div>
        </div>
      </div>

      <!-- Floating Loan Card -->
      <div class="col-lg-5 offset-lg-1 d-none d-lg-block">
        <div class="floating-loan-card p-4 rounded-4 position-relative"
          style="background: rgba(20,20,20,0.7); border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(20px);">

          <!-- Card Header -->
          <div class="d-flex align-items-center gap-3 mb-4">
            <div class="icon-success d-flex align-items-center justify-content-center rounded-3"
              style="width: 50px; height: 50px; background: rgba(16,185,129,0.2);">
              <i class="bi bi-check-lg text-success fs-4"></i>
            </div>
            <div>
              <div class="fw-bold text-white">Pengajuan Disetujui</div>
              <div class="text-secondary small">Baru saja</div>
            </div>
          </div>

          <!-- Loan Details -->
          <div class="p-3 rounded-3 mb-3"
            style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);">
            <div class="d-flex justify-content-between mb-2">
              <span class="text-secondary small">Limit Diterima</span>
              <span class="text-white fw-bold">Rp 50.000.000</span>
            </div>
            <div class="progress" style="height: 6px; background: rgba(255,255,255,0.1);">
              <div class="progress-bar bg-success" role="progressbar" style="width: 100%"></div>
            </div>
          </div>

          <!-- Loan Info Grid -->
          <div class="row g-3">
            <div class="col-6">
              <div class="p-3 rounded-3 text-center" style="background: rgba(255,255,255,0.03);">
                <div class="text-white fw-bold fs-5">0.8%</div>
                <div class="text-secondary small">Bunga/Bulan</div>
              </div>
            </div>
            <div class="col-6">
              <div class="p-3 rounded-3 text-center" style="background: rgba(255,255,255,0.03);">
                <div class="text-white fw-bold fs-5">12 Bulan</div>
                <div class="text-secondary small">Tenor Max</div>
              </div>
            </div>
          </div>

          <!-- CTA -->
          <a routerLink="/login" class="btn btn-success w-100 rounded-pill py-3 mt-4 fw-bold">
            <i class="bi bi-cash-stack me-2"></i> Cairkan Sekarang
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- 2. PROGRAM SECTION (Monthly Flow Style) -->
<section id="program" class="section-padding position-relative overflow-hidden py-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-10">
        <div class="program-card glass-card-green p-5 rounded-5 position-relative overflow-hidden">
          <!-- Background Gradient -->
          <div class="position-absolute top-0 start-0 w-100 h-100 opacity-25"
            style="background: linear-gradient(135deg, #10B981 0%, transparent 60%); z-index: 0;"></div>

          <div class="position-absolute top-0 end-0 p-4 z-2">
            <span class="badge bg-white text-dark fw-bold px-3 py-2 rounded-pill">MOST POPULAR</span>
          </div>

          <div class="row align-items-center position-relative z-1">
            <div class="col-lg-7">
              <h2 class="display-4 fw-bold text-white mb-3">Bebas Bunga</h2>
              <p class="fs-4 text-white-50 mb-4">
                Khusus pengguna baru, nikmati pinjaman dengan tenor 1 bulan <span class="text-white fw-bold">Bunga
                  0%</span>.
              </p>
              <div class="d-flex gap-5 mb-4">
                <div>
                  <h3 class="text-white mb-0 display-6 fw-bold">0%</h3>
                  <small class="text-white-50 text-uppercase ls-1">Interest</small>
                </div>
                <div>
                  <h3 class="text-white mb-0 display-6 fw-bold">30</h3>
                  <small class="text-white-50 text-uppercase ls-1">Days</small>
                </div>
              </div>
            </div>
            <div class="col-lg-5 text-end">
              <div class="fs-1 fw-bold text-white mb-1">Rp 0</div>
              <div class="text-white-50 mb-4">Biaya Layanan</div>
              <a routerLink="/login" class="btn btn-success rounded-pill w-100 py-3 fw-bold text-dark border-0"
                style="background: #6EE7B7;">
                Ambil Promo <i class="bi bi-arrow-right ms-2"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- 3. KEUNGGULAN SECTION -->
<section id="keunggulan" class="section-padding py-5 position-relative" style="z-index: 2;">
  <div class="container">
    <div class="row align-items-end mb-5">
      <div class="col-lg-8">
        <h2 class="display-5 fw-bold text-white">Mengapa Loanly?</h2>
      </div>
      <div class="col-lg-4 text-lg-end">
        <p class="text-secondary mb-0">Keunggulan teknologi kami</p>
      </div>
    </div>

    <div class="row g-4">
      <div class="col-md-4">
        <div class="feature-card p-4 rounded-4 glass-card-solid h-100">
          <i class="bi bi-lightning-charge-fill fs-1 text-warning mb-4 d-block"></i>
          <h4 class="text-white fw-bold mb-3">Super Cepat</h4>
          <p class="text-secondary mb-0">Analisis kredit otomatis dalam hitungan detik menggunakan AI.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="feature-card p-4 rounded-4 glass-card-solid h-100">
          <i class="bi bi-shield-fill-check fs-1 text-success mb-4 d-block"></i>
          <h4 class="text-white fw-bold mb-3">Aman & Legal</h4>
          <p class="text-secondary mb-0">Berizin resmi dan diawasi oleh Otoritas Jasa Keuangan (OJK).</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="feature-card p-4 rounded-4 glass-card-solid h-100">
          <i class="bi bi-graph-up-arrow fs-1 text-primary mb-4 d-block"></i>
          <h4 class="text-white fw-bold mb-3">Limit Naik</h4>
          <p class="text-secondary mb-0">Bayar tepat waktu dan dapatkan kenaikan limit otomatis.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- 4. PRODUK PINJAMAN (Dynamic from Database) -->
<section id="produk" class="section-padding py-5">
  <div class="container">
    <h2 class="display-5 fw-bold text-white mb-5 text-center">Produk Pilihan</h2>

    @if (isLoading()) {
    <div class="text-center py-5">
      <div class="spinner-border text-light" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="text-secondary mt-3">Memuat produk...</p>
    </div>
    } @else {
    <div class="row g-4 justify-content-center">
      @for (plafond of plafonds(); track plafond.id; let i = $index) {
      <div class="col-lg-4 col-md-6">
        <div class="product-card p-4 rounded-4 h-100 d-flex flex-column position-relative overflow-hidden" [ngStyle]="{
            'background': getTierStyle(plafond.name).background,
            'border': getTierStyle(plafond.name).border,
            'backdrop-filter': 'blur(20px)',
            '-webkit-backdrop-filter': 'blur(20px)'
          }">

          <div class="d-flex justify-content-between mb-4">
            <h3 class="fw-bold text-white h4">{{ plafond.name }}</h3>
            @if (plafond.name.toLowerCase().includes('vvip')) {
            <span class="badge fw-bold p-2 text-uppercase"
              style="font-size: 10px; height: fit-content; background: #8B5CF6; color: white;">PREMIUM</span>
            }
            @if (plafond.name.toLowerCase().includes('diamond')) {
            <span class="badge fw-bold p-2 text-uppercase"
              style="font-size: 10px; height: fit-content; background: #3B82F6; color: white;">EXCLUSIVE</span>
            }
            @if (plafond.name.toLowerCase().includes('gold')) {
            <span class="badge fw-bold p-2 text-uppercase"
              style="font-size: 10px; height: fit-content; background: #F59E0B; color: #1F2937;">POPULAR</span>
            }
          </div>

          <p class="text-white opacity-75 mb-4 flex-grow-1" style="font-size: 0.95rem;">
            {{ plafond.description || 'Solusi pinjaman cepat dan mudah untuk kebutuhan Anda.' }}
          </p>

          <div class="mb-4">
            <div class="fs-2 fw-bold text-white">{{ formatCurrency(plafond.maxAmount) }}</div>
            <div class="text-white opacity-50 small">Limit Maksimal</div>
          </div>

          <a routerLink="/login" class="btn rounded-pill w-100 py-3 fw-bold"
            [ngStyle]="{ 'cssText': getTierStyle(plafond.name).btnStyle }"
            [class]="getTierStyle(plafond.name).btnClass">
            Ajukan Sekarang <i class="bi bi-arrow-right ms-2"></i>
          </a>
        </div>
      </div>
      } @empty {
      <div class="col-12 text-center py-5">
        <i class="bi bi-inbox fs-1 text-secondary mb-3 d-block"></i>
        <p class="text-secondary">Tidak ada produk tersedia saat ini</p>
      </div>
      }
    </div>
    }
  </div>
</section>

<!-- 5. TAHAPAN PENGAJUAN (Horizontal Flow) -->
<section id="tahapan" class="section-padding py-5">
  <div class="container">
    <div class="mb-5">
      <h2 class="display-5 fw-bold text-white">Tahapan Mudah</h2>
      <p class="text-secondary">Geser untuk melihat proses</p>
    </div>

    <!-- Scrolling Wrapper for Horizontal Steps -->
    <div class="scrolling-wrapper d-flex flex-nowrap gap-4 pb-4 overflow-auto"
      style="-webkit-overflow-scrolling: touch;">

      <!-- Step 01 -->
      <div class="col-10 col-md-4" style="min-width: 300px;">
        <div class="step-card p-4 rounded-4 glass-card-solid h-100 position-relative">
          <div class="position-absolute top-0 end-0 p-3 opacity-10">
            <i class="bi bi-person-plus-fill display-1"></i>
          </div>
          <div class="step-number text-gradient-purple display-3 fw-bold mb-3" style="font-family: monospace;">01</div>
          <h4 class="text-white fw-bold mb-2">Isi Formulir</h4>
          <p class="text-secondary">Lengkapi data diri singkat dalam 2 menit.</p>
        </div>
      </div>

      <!-- Step 02 -->
      <div class="col-10 col-md-4" style="min-width: 300px;">
        <div class="step-card p-4 rounded-4 glass-card-solid h-100 position-relative">
          <div class="position-absolute top-0 end-0 p-3 opacity-10">
            <i class="bi bi-search display-1"></i>
          </div>
          <div class="step-number text-gradient-purple display-3 fw-bold mb-3" style="font-family: monospace;">02</div>
          <h4 class="text-white fw-bold mb-2">Review</h4>
          <p class="text-secondary">Sistem menganalisis profil Anda secara otomatis.</p>
        </div>
      </div>

      <!-- Step 03 -->
      <div class="col-10 col-md-4" style="min-width: 300px;">
        <div class="step-card p-4 rounded-4 glass-card-solid h-100 position-relative">
          <div class="position-absolute top-0 end-0 p-3 opacity-10">
            <i class="bi bi-check-circle-fill display-1"></i>
          </div>
          <div class="step-number text-gradient-purple display-3 fw-bold mb-3" style="font-family: monospace;">03</div>
          <h4 class="text-white fw-bold mb-2">Approve</h4>
          <p class="text-secondary">Persetujuan instan jika data valid.</p>
        </div>
      </div>

      <!-- Step 04 -->
      <div class="col-10 col-md-4" style="min-width: 300px;">
        <div class="step-card p-4 rounded-4 glass-card-solid h-100 position-relative">
          <div class="position-absolute top-0 end-0 p-3 opacity-10">
            <i class="bi bi-wallet-fill display-1"></i>
          </div>
          <div class="step-number text-gradient-purple display-3 fw-bold mb-3" style="font-family: monospace;">04</div>
          <h4 class="text-white fw-bold mb-2">Limit Siap</h4>
          <p class="text-secondary">Plafond kredit langsung aktif di akun Anda.</p>
        </div>
      </div>

      <!-- Step 05 -->
      <div class="col-10 col-md-4" style="min-width: 300px;">
        <div class="step-card p-4 rounded-4 glass-card-solid h-100 position-relative"
          style="border-color: #10B981 !important;">
          <div class="position-absolute top-0 end-0 p-3 opacity-10 text-success">
            <i class="bi bi-cash-stack display-1"></i>
          </div>
          <div class="step-number text-success display-3 fw-bold mb-3" style="font-family: monospace;">05</div>
          <h4 class="text-white fw-bold mb-2">Cairkan Dana</h4>
          <p class="text-secondary">Transfer ke rekening Anda kapan saja.</p>
        </div>
      </div>

    </div>
  </div>
</section>

<!-- 6. DOWNLOAD CTA SECTION -->
<section class="py-5 position-relative" style="z-index: 2;">
  <div class="container">
    <div class="rounded-4 p-5 text-center position-relative overflow-hidden"
      style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(20, 184, 166, 0.2) 100%); border: 1px solid rgba(59, 130, 246, 0.3); backdrop-filter: blur(20px);">
      <h2 class="display-5 fw-bold text-white mb-3">Download Loanly Sekarang</h2>
      <p class="text-secondary mb-4" style="max-width: 500px; margin: 0 auto;">
        Dapatkan akses pinjaman cepat langsung dari smartphone Anda. Tersedia di App Store dan Google Play.
      </p>
      <div class="d-flex gap-3 justify-content-center flex-wrap">
        <a href="#" class="btn btn-light btn-lg rounded-pill px-4 py-2 d-flex align-items-center gap-2">
          <i class="bi bi-apple fs-4"></i>
          <div class="text-start">
            <div class="small opacity-75" style="font-size: 10px;">Download on</div>
            <div class="fw-bold" style="line-height: 1;">App Store</div>
          </div>
        </a>
        <a href="#" class="btn btn-light btn-lg rounded-pill px-4 py-2 d-flex align-items-center gap-2">
          <i class="bi bi-google-play fs-4"></i>
          <div class="text-start">
            <div class="small opacity-75" style="font-size: 10px;">Get it on</div>
            <div class="fw-bold" style="line-height: 1;">Google Play</div>
          </div>
        </a>
      </div>
    </div>
  </div>
</section>

<!-- 7. FOOTER -->
<footer class="py-5 border-top border-secondary border-opacity-10 position-relative"
  style="z-index: 2; background-color: rgba(5, 5, 5, 0.95); padding-bottom: 120px !important;">
  <div class="container">
    <div class="row g-5">
      <div class="col-lg-5">
        <h3 class="fw-bold text-white mb-4">Loanly</h3>
        <p class="text-secondary" style="max-width: 400px;">
          Berkomitmen membantu finansial masyarakat Indonesia dengan teknologi, transparansi, dan kepercayaan.
        </p>
        <!-- Trust Badges -->
        <div class="d-flex gap-4 mt-4">
          <div class="d-flex align-items-center gap-2">
            <i class="bi bi-shield-check text-success fs-5"></i>
            <span class="text-secondary small">OJK Licensed</span>
          </div>
          <div class="d-flex align-items-center gap-2">
            <i class="bi bi-lock-fill text-primary fs-5"></i>
            <span class="text-secondary small">ISO 27001</span>
          </div>
        </div>
      </div>
      <div class="col-lg-2">
        <h6 class="text-white fw-bold mb-3">Sitemap</h6>
        <ul class="list-unstyled">
          <li class="mb-2"><a href="#home" class="text-secondary text-decoration-none hover-white">Home</a></li>
          <li class="mb-2"><a href="#program" class="text-secondary text-decoration-none hover-white">Program</a></li>
          <li class="mb-2"><a href="#produk" class="text-secondary text-decoration-none hover-white">Produk</a></li>
          <li class="mb-2"><a href="#tahapan" class="text-secondary text-decoration-none hover-white">Tahapan</a></li>
        </ul>
      </div>
      <div class="col-lg-2">
        <h6 class="text-white fw-bold mb-3">Legal</h6>
        <ul class="list-unstyled">
          <li class="mb-2"><a href="#" class="text-secondary text-decoration-none hover-white">Privacy Policy</a></li>
          <li class="mb-2"><a href="#" class="text-secondary text-decoration-none hover-white">Terms of Service</a></li>
          <li class="mb-2"><a href="#" class="text-secondary text-decoration-none hover-white">FAQ</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h6 class="text-white fw-bold mb-3">Hubungi Kami</h6>
        <p class="text-secondary mb-2"><i class="bi bi-envelope me-2"></i>hello@loanly.id</p>
        <p class="text-secondary mb-3"><i class="bi bi-telephone me-2"></i>+62 21 1234 5678</p>
        <div class="d-flex gap-3">
          <a href="#" class="text-white fs-5"><i class="bi bi-instagram"></i></a>
          <a href="#" class="text-white fs-5"><i class="bi bi-linkedin"></i></a>
          <a href="#" class="text-white fs-5"><i class="bi bi-twitter-x"></i></a>
          <a href="#" class="text-white fs-5"><i class="bi bi-facebook"></i></a>
        </div>
      </div>
    </div>
    <div class="mt-5 pt-4 border-top border-secondary border-opacity-25 text-center text-secondary small">
      &copy; 2026 PT Loanly Indonesia. Terdaftar dan diawasi OJK.
    </div>
  </div>
</footer>